doctype 5
html
  head
    title room.js editor
    link(rel='stylesheet', href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400')
    link(rel='stylesheet', href='/assets/editor.css')
  body
    .ui-layout-center
      .tabs
        ul.nav.nav-tabs
          li: a(href='#')
            i.icon-cog
            |$player.i*nventory
            button.close.dirty •
          li: a(href='#')
            i.icon-cog
            |$root.tell
            button.close ×
          li.active: a(href='#')
            i.icon-cog
            |$thing.g*et t*ake gr*ab
            button.close ×
          li: a(href='#')
            i.icon-file-alt
            |[#7 Wooden Sword].description
            button.close ×
      .toolbar.navbar.navbar-static-top
        .navbar-inner
          form.navbar-form.form-inline
            .row-fluid
              input(type='text', value='g*et t*ake gr*ab')
              select
                option none
                option(selected) this
                option any
              select
                option none
                option any
                option with/using
                option at/to
                option in front of
                option in/inside/into
                option on top of/on/onto/upon
                option out of/from inside/from
                option over
                option through
                option under/underneath/beneath
                option behind
                option beside
                option for/about
                option is
                option as
                option off/off of
              select
                option none
                option this
                option any
              label.checkbox
                input(type='checkbox')
                |hidden
              button.btn.btn-primary.pull-right
                |Save
      .editor

    .ui-layout-west
      .ui-layout-west-center
        .search
          .row-fluid
            input.search-query.span12(type='text', placeholder='Filter')
        hr
        .row-fluid
          .overflow-container
            ul.nav.nav-list
              li
                span.pull-left
                  i.icon-caret-right
                a(href='#')
                  span.label.label-info #0
                  span.label $sys
                  |System Object
              li
                span.pull-left
                  i.icon-caret-down
                a(href='#')
                  span.label.label-info #1
                  span.label $root
                  |Root Class
                ul.nav.nav-list.level1
                  li
                    span.pull-left
                      i.icon-caret-down
                    a(href='#')
                      span.label.label-info #2
                      span.label $player
                      |Player Class
                    ul.nav.nav-list.level2
                      li.active
                        span.pull-left
                          i.icon-user
                        a(href='#')
                          span.label.label-inverse #3
                          span.label $wizard
                          |Gandalf
                  li
                    span.pull-left
                      i.icon-caret-right
                    a(href='#')
                      span.label.label-info #4
                      span.label $room
                      |Room Class
                  li
                    span.pull-left
                      i.icon-caret-right
                    a(href='#')
                      span.label.label-info #5
                      span.label $thing
                      |Thing Class
                  li
                    span.pull-left
                      i.icon-caret-right
                    a(href='#')
                      span.label.label-info #8
                      span.label $exit
                      |Exit Class
              li
                span.pull-left
                  i.icon-caret-right
                a(href='#')
                  span.label.label-info #21
                  span.label $util
                  |Utility Verbs

      .ui-layout-west-south
        .overflow-container
          ul.nav.nav-list
            li.nav-header Properties
            li
              a(href='#')
                i.icon-file-alt
                |color
            li
              a(href='#')
                i.icon-file-alt
                |health
            li.nav-header Verbs
            li
              a(href='#')
                i.icon-cog
                |tell
            li.active
              a(href='#')
                i.icon-cog
                |i*nventory
            li
              a(href='#')
                i.icon-cog
                |dance
            li
              a(href='#')
                i.icon-cog
                |hurt


    script(src='/socket.io/socket.io.js')
    script(src='/assets/ace/ace.js')
    script(src='/assets/editor.js')
    :coffeescript
      $ ->
        ko.applyBindings new EditorView $('body')

        element = $('.editor')[0]
        code = """
        if @location == player
          player.tell "You're already holding \#\{@name\}."
        else
          @location = player
          player.tell "You pick up \#\{@name\}."
          player.location.announce "\#\{player.name\} picks up \#\{@name\}."
        """
        options = {mode: "coffee", theme: "clouds", value: code, css: {fontSize: "12pt", fontFamily: "\'Source Code Pro\', sans-serif"}}
        theme = options.theme || 'textmate'
        mode = options.mode || 'javascript'
        css = options.css || {}
        value = options.value

        editor = ace.edit(element)
        editor.setTheme("ace/theme/"+theme)
        session = editor.getSession()
        session.setMode("ace/mode/"+mode)
        session.setUseSoftTabs(true)
        session.setTabSize(2)
        $(element).css(css)
        editor.setValue(value, -1)